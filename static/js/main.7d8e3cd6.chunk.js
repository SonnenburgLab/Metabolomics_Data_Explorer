(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{196:function(e,t,a){e.exports=a(337)},201:function(e,t,a){},202:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(56),i=a.n(l),r=(a(201),a(202),a(99)),s=a(52),c=a(15),m=a(17),u=a(28),d=a(26),p=a(96),b=a(90),h=a(95),f=a(66),v=a.n(f),y=a(42),S=a(91),g=a(50),C=a(193),E=function(e){var t=e.children;return o.a.createElement(C.a,{height:300,itemSize:30,itemCount:t.length},function(e){var a=e.index,n=(e.isScrolling,e.style);return o.a.createElement("div",{style:Object(g.a)({},n,{whiteSpace:"nowrap"})},t[a])})},x=a(12),O=function(e){e.innerProps;return o.a.createElement(x.z.Option,e,o.a.createElement("div",null,e.label),e.data.description?o.a.createElement("div",{className:"option-byline"},e.data.description):null)},w=function(e){var t=z(e,"y"),a=Math.max.apply(Math,Object(m.a)(t)),n=Math.min.apply(Math,Object(m.a)(t)),o=a-n;if(0==o){var l=2*a;return[Math.min(l,0),Math.max(l,0)]}return[n-.1*o,a+.1*o]},z=function(e,t){var a=e.map(function(e){return e.map(function(e){return e[t]})}).flat();return Object(m.a)(new Set(a))},M=function(e,t){return(e=e.toLowerCase())<(t=t.toLowerCase())?-1:e>t?1:0},T=function(e,t){return e.label<t.label?-1:e.label>t.label?1:0},j=function(e,t){return"mm"===e.value?-1:"mm"===t.value?1:e.label<t.label?-1:e.label>t.label?1:0},k=function(e,t){var a=e[0],n=[],o=function(a){if(t.includes(a)||a.startsWith("IS_"))return"continue";if(0==e.filter(function(e){return void 0!==e[a]&&""!==e[a]}).length)return"continue";var o=a.split(".")[0];n.push(o)};for(var l in a)o(l);return Object(m.a)(new Set(n)).map(function(e){return{value:e,label:e.toUpperCase()}}).sort(T)},N={mm:"Mega Media",bhis:"Brain Heart Infusion-Supplemented (BHIS)",cm:"Chopped Meat (CM)",mml:"Mega Media with Lactate",mms:"Mega Media with Starch",mm_s04_citrate:"Mega Media with Sulfate, Citrate",pyg:"Peptone Yeast Glucose (PYG)",pyg_muc:"Peptone Yeast Glucose (PYG) with Mucus",paf:"Polyamine-free Media",rcm:"Reinforced Clostridial Media (RCM)",rcml:"Reinforced Clostridial Media (RCM) with Lactate",rcmsg:"Reinforced Clostridial Media (RCM) with Starch, Glucose",rcmwoa:"Reinforced Clostridial Media (RCM) without Agar",tsab:"Tryptic Soy Agar (TSA) with Blood",ycfag:"Yeast, Casitone, Fatty Acids (YCFA) with Glucose"},_={Bt_Ca_Er_Pd_Et:{label:"Bt, Ca, Er, Pd, Et",description:"Bacteroides thetaiotaomicron VPI 5482\nCollinsella aerofaciens ATCC 25986\nEubacterium rectale ATCC 33656\nParabacteroides distasonis ATCC 8503\nEdwardsiella tarda ATCC 23685"},Cs_Bt_Ca_Er_Pd_Et:{label:"Cs, Bt, Ca, Er, Pd, Et",description:"Clostridium sporogenes ATCC 15579\nBacteroides thetaiotaomicron VPI 5482\nCollinsella aerofaciens ATCC 25986\nEubacterium rectale ATCC 33656\nParabacteroides distasonis ATCC 8503\nEdwardsiella tarda ATCC 23685"}},P={Bt:{label:"Bt",description:"Bacteroides thetaiotaomicron VPI 5482"},Cs:{label:"Cs",description:"Clostridium sporogenes ATCC 15579"},Cp:{label:"Cp",description:"Citrobacter portucalensis BEI HM-34"},As:{label:"As",description:"Anaerostipes sp. BEI HM-220"}},A={conventional:{label:"Conventional"}},R={caecal:"cecal"},D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={taxonomySelection:{taxonomy:null,media:null},metaboliteSelection:{metabolite:null,media:null},data:[],metadataCols:[],taxonomyOptions:[],taxonomyMediaOptions:[],metaboliteOptions:[],metaboliteMediaOptions:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.parse("in_vitro_metadata.txt",{download:!0,complete:function(t){v.a.parse("in_vitro_data.txt",{download:!0,complete:function(a){var n=(a=a.data.map(function(e,a){return Object.assign({},e,t.data[a])})).filter(function(e){return"supernatant"===e.sample_type});e.setState({data:n,taxonomyOptions:e.getTaxonomyOptions(n),metaboliteOptions:k(n,t.meta.fields),metadataCols:t.meta.fields})},header:!0})},header:!0})}},{key:"handleTaxonomySelectionChange",value:function(e,t){if("taxonomy"===e)if(t){var a=this.state.data.filter(function(e){return e.taxonomy===t.value}).map(function(e){return e.media}),n=Object(m.a)(new Set(a));this.setState({taxonomySelection:{taxonomy:t.value,media:null},metaboliteSelection:{metabolite:null,media:null,mode:null},taxonomyMediaOptions:n.map(function(e){return{value:e,label:N[e]?N[e]:e}})})}else this.setState({taxonomySelection:{taxonomy:null,media:null}});else"media"===e&&this.setState({taxonomySelection:{taxonomy:this.state.taxonomySelection.taxonomy,media:t?t.value:null}})}},{key:"handleMetaboliteSelectionChange",value:function(e,t){if("metabolite"===e)if(t){var a=t.value,n=this.state.data.filter(function(e){return""!==e[a]&&void 0!==e[a]}).map(function(e){return e.media}),o=Object(m.a)(new Set(n));this.setState({metaboliteSelection:{metabolite:t.value,media:null},taxonomySelection:{taxonomy:null,media:null},metaboliteMediaOptions:o.map(function(e){return{value:e,label:N[e]?N[e]:e}})})}else this.setState({metaboliteSelection:{metabolite:null,media:null}});else"media"===e&&this.setState({metaboliteSelection:{metabolite:this.state.metaboliteSelection.metabolite,media:t?t.value:null}})}},{key:"getTaxonomyOptions",value:function(e){var t=e.map(function(e){return e.taxonomy});return Object(m.a)(new Set(t)).sort(M).map(function(e){return{value:e,label:e}})}},{key:"getPlotData",value:function(){var e=this;if(null!==this.state.taxonomySelection.media){var t=this.state.data.filter(function(t){return t.taxonomy===e.state.taxonomySelection.taxonomy&&t.media===e.state.taxonomySelection.media}),a=[];for(var n in t){var o=t[n];for(var l in o)if(!this.state.metadataCols.includes(l)&&!l.startsWith("IS_")){var i=Number(o[l]);0!==i&&a.push({name:l,y:i})}}for(var r=Object(m.a)(new Set(a.map(function(e){return e.name}))).sort(M),s={},u=0,d=Object.entries(r);u<d.length;u++){var p=d[u],b=Object(c.a)(p,2),h=b[0],f=b[1];s[f]=Number(h)}return{plotData:[{id:"all",data:a=a.map(function(e){return{x:s[e.name],y:e.y,name:e.name}})}],allNames:r,yRange:w([a])}}if(null!==this.state.metaboliteSelection.media){var v=this.state.data.filter(function(t){return t.media===e.state.metaboliteSelection.media}),y=[];for(var S in v){var g=v[S],C=g[this.state.metaboliteSelection.metabolite];""!==C&&void 0!==C&&y.push({name:g.taxonomy,y:Number(C)})}for(var E=Object(m.a)(new Set(y.map(function(e){return e.name}))).sort(M),x={},O=0,z=Object.entries(E);O<z.length;O++){var T=z[O],j=Object(c.a)(T,2),k=j[0],N=j[1];x[N]=Number(k)}return{plotData:[{id:"all",data:y=y.map(function(e){return{x:x[e.name],y:e.y,name:e.name}})}],allNames:E,yRange:w([y])}}return{plotData:[],allNames:{},yRange:[0,0]}}},{key:"render",value:function(){var e=this,t=this.getPlotData(),a=t.plotData,n=t.allNames,l=t.yRange,i=Math.max(300,11*Object.keys(n).length+100);return o.a.createElement("div",{className:"App"},o.a.createElement("p",null,"This page enables plotting ",o.a.createElement("em",null,"in vitro")," data from Han and Van Treuren ",o.a.createElement("em",null,"et al"),"."),o.a.createElement("p",null,"Select a ",o.a.createElement("strong",null,"Taxonomy")," and ",o.a.createElement("strong",null,"Media")," below to plot the relative fold change across all metabolites."),o.a.createElement("p",null,"Alternatively, select a ",o.a.createElement("strong",null,"Metabolite")," and ",o.a.createElement("strong",null,"Media")," below to plot the relative fold change across all taxonomies."),o.a.createElement("form",{className:"form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"taxonomy"},"Taxonomy"),o.a.createElement(y.a,{id:"taxonomy",className:"dropdown",components:{MenuList:E},isClearable:!0,options:this.state.taxonomyOptions,onChange:function(t){return e.handleTaxonomySelectionChange("taxonomy",t)},value:this.state.taxonomyOptions.find(function(t){return t.value===e.state.taxonomySelection.taxonomy})||null})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"media"},"Media"),o.a.createElement(y.a,{id:"media",className:"dropdown",isClearable:!0,isDisabled:null===this.state.taxonomySelection.taxonomy,options:this.state.taxonomyMediaOptions.sort(j),onChange:function(t){return e.handleTaxonomySelectionChange("media",t)},value:this.state.taxonomyMediaOptions.find(function(t){return t.value===e.state.taxonomySelection.media})||null}))),o.a.createElement("form",{className:"form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"metabolite"},"Metabolite"),o.a.createElement(y.a,{id:"metabolite",className:"dropdown",components:{MenuList:E},isClearable:!0,options:this.state.metaboliteOptions,onChange:function(t){return e.handleMetaboliteSelectionChange("metabolite",t)},value:this.state.metaboliteOptions.find(function(t){return t.value===e.state.metaboliteSelection.metabolite})||null})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"media"},"Media"),o.a.createElement(y.a,{id:"media",className:"dropdown",isClearable:!0,isDisabled:null===this.state.metaboliteSelection.metabolite,options:this.state.metaboliteMediaOptions.sort(j),onChange:function(t){return e.handleMetaboliteSelectionChange("media",t)},value:this.state.metaboliteMediaOptions.find(function(t){return t.value===e.state.metaboliteSelection.media})||null}))),a.length>0?o.a.createElement("div",{style:{width:"100%",overflowX:"scroll",overflowY:"hidden"}},o.a.createElement("div",{style:{minWidth:i+"px",width:i<500?i+"px":null,height:"1100px"}},o.a.createElement(S.a,{tooltip:function(t){var a=t.node;return o.a.createElement("div",{style:{background:"#fff",border:"1px solid #ccc",color:a.style.color,fontSize:"12px",padding:"6px 6px"}},o.a.createElement("div",{style:{maxWidth:"400px",wordWrap:"break-word"}},o.a.createElement("strong",null,e.state.metaboliteSelection.metabolite?"taxonomy":"metabolite"),": ",a.data.name),o.a.createElement("div",null,o.a.createElement("strong",null,"y"),": ",a.data.formattedY))},data:a,colors:{scheme:"category10"},theme:{fontSize:10},pixelRatio:2,margin:{top:80,right:20,bottom:740,left:90},xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:l[0],max:l[1]},nodeSize:4,gridXValues:Object.keys(n),axisBottom:{format:function(e){return n[e]},orient:"bottom",tickValues:Object.keys(n),tickSize:5,tickPadding:5,tickRotation:-90,legend:this.state.metaboliteSelection.metabolite?"Taxonomy":"Metabolite",legendPosition:"middle",legendOffset:this.state.metaboliteSelection.metabolite?300:700},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Relative fold change versus media blank controls (log2)",legendPosition:"middle",legendOffset:-60}}))):null,0==a.length?o.a.createElement("footer",null,o.a.createElement("p",null,"About the Website: The Metabolomics Data Explorer was designed by Shuo Han. \xa9 The Sonnenburg Lab 2020, Stanford University")):null)}}]),t}(o.a.Component),B=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={colonizationSelection:{colonization:null,sampleType:null},metaboliteSelection:{metabolite:null,sampleType:null},data:[],metadataCols:[],colonizationOptions:[],colonizationSampleTypeOptions:[],metaboliteOptions:[],metaboliteSampleTypeOptions:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.parse("mouse_metadata.txt",{download:!0,complete:function(t){v.a.parse("mouse_data.txt",{download:!0,complete:function(a){var n=(a=a.data.map(function(e,a){return Object.assign({},e,t.data[a])})).filter(function(e){return"germ-free"!==e.colonization&&void 0!==e.colonization});e.setState({data:n,colonizationOptions:e.getColonizationOptions(n),metaboliteOptions:k(n,t.meta.fields),metadataCols:t.meta.fields})},header:!0})},header:!0})}},{key:"handleColonizationSelectionChange",value:function(e,t){if("colonization"===e)if(t){var a=this.state.data.filter(function(e){return e.colonization===t.value}).map(function(e){return e.sample_type}),n=Object(m.a)(new Set(a));this.setState({colonizationSelection:{colonization:t.value,sampleType:null},metaboliteSelection:{metabolite:null,sampleType:null},colonizationSampleTypeOptions:n.map(function(e){return{value:e,label:R[e]?R[e]:e}})})}else this.setState({colonizationSelection:{colonization:null,sampleType:null}});else"sample_type"===e&&(t?this.setState({colonizationSelection:Object(g.a)({},this.state.colonizationSelection,{sampleType:t.value})}):this.setState({colonizationSelection:Object(g.a)({},this.state.colonizationSelection,{sampleType:null})}))}},{key:"handleMetaboliteSelectionChange",value:function(e,t){if("metabolite"===e)if(t){var a=t.value,n=this.state.data.filter(function(e){return""!==e[a]&&void 0!==e[a]}).map(function(e){return e.sample_type}),o=Object(m.a)(new Set(n));this.setState({metaboliteSelection:{metabolite:t.value,sampleType:null},colonizationSelection:{colonization:null,sampleType:null},metaboliteSampleTypeOptions:o.map(function(e){return{value:e,label:R[e]?R[e]:e}})})}else this.setState({metaboliteSelection:{metabolite:null,sampleType:null}});else"sample_type"===e&&(t?this.setState({metaboliteSelection:Object(g.a)({},this.state.metaboliteSelection,{sampleType:t.value})}):this.setState({metaboliteSelection:Object(g.a)({},this.state.metaboliteSelection,{sampleType:null})}))}},{key:"getColonizationOptions",value:function(e){var t=e.map(function(e){return e.colonization}),a=Object(m.a)(new Set(t)),n={community:[],mono:[],conventional:[]};for(var o in a){var l=a[o];_[l]?n.community.push({value:l,label:_[l].label,description:_[l].description}):A[l]?n.conventional.push({value:l,label:A[l].label}):n.mono.push({value:l,label:P[l].label,description:P[l].description})}return[{label:"Defined Community",options:n.community},{label:"Mono-colonization",options:n.mono},{label:"Conventional",options:n.conventional}]}},{key:"getPlotData",value:function(){var e=this;if(null!==this.state.colonizationSelection.sampleType){var t=this.state.data.filter(function(t){return t.colonization===e.state.colonizationSelection.colonization&&t.sample_type===e.state.colonizationSelection.sampleType}),a=[];for(var n in t){var o=t[n];for(var l in o)if(!this.state.metadataCols.includes(l)&&!l.startsWith("IS_")){var i=Number(o[l]);0!==i&&a.push({name:l,y:i})}}for(var r=Object(m.a)(new Set(a.map(function(e){return e.name}))).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),s={},u=0,d=Object.entries(r);u<d.length;u++){var p=d[u],b=Object(c.a)(p,2),h=b[0],f=b[1];s[f]=Number(h)}return{plotData:[{id:"all",data:a=a.map(function(e){return{x:s[e.name],y:e.y,name:e.name}})}],allNames:r,yRange:w([a])}}if(null!==this.state.metaboliteSelection.sampleType){var v=this.state.data.filter(function(t){return t.sample_type===e.state.metaboliteSelection.sampleType}),y=[];for(var S in v){var g=v[S],C=g[this.state.metaboliteSelection.metabolite];""!==C&&void 0!==C&&y.push({name:g.colonization,y:C})}for(var E=Object(m.a)(new Set(y.map(function(e){return e.name}))).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),x={},O=0,z=Object.entries(E);O<z.length;O++){var M=z[O],T=Object(c.a)(M,2),j=T[0],k=T[1];x[k]=Number(j)}var N=function(e){return _[e]?_[e].label:P[e]?P[e].label:A[e].label};return{plotData:[{id:"all",data:y=y.map(function(e){return{x:x[e.name],y:e.y,name:N(e.name)}})}],allNames:E.map(N),yRange:w([y])}}return{plotData:[],allNames:{},yRange:[0,0]}}},{key:"render",value:function(){var e=this,t=this.getPlotData(),a=t.plotData,n=t.allNames,l=t.yRange,i=Math.max(300,11*Object.keys(n).length+100),r=Object.assign({},_,P,A);return o.a.createElement("div",{className:"App"},o.a.createElement("p",null,"This page enables plotting ",o.a.createElement("em",null,"in vivo")," data from Han and Van Treuren ",o.a.createElement("em",null,"et al"),"."),o.a.createElement("p",null,"Select a ",o.a.createElement("strong",null,"Colonization")," and ",o.a.createElement("strong",null,"Sample Type")," below to plot the relative fold change across all metabolites."),o.a.createElement("p",null,"Alternatively, select a ",o.a.createElement("strong",null,"Metabolite")," and ",o.a.createElement("strong",null,"Sample Type")," below to plot the relative fold change across all colonizations."),o.a.createElement("form",{className:"form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"colonization"},"Gnotobiotic Mice Colonization"),o.a.createElement(y.a,{id:"colonization",className:"dropdown",components:{Option:O},isClearable:!0,options:this.state.colonizationOptions,onChange:function(t){return e.handleColonizationSelectionChange("colonization",t)},styles:{option:function(e,t){return Object(g.a)({},e,{whiteSpace:"pre-wrap"})}},value:this.state.colonizationSelection.colonization?Object(g.a)({},r[this.state.colonizationSelection.colonization],{value:this.state.colonizationSelection.colonization}):null})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"sample_type"},"Sample Type"),o.a.createElement(y.a,{id:"sample_type",className:"dropdown",isClearable:!0,isDisabled:null===this.state.colonizationSelection.colonization,options:this.state.colonizationSampleTypeOptions,onChange:function(t){return e.handleColonizationSelectionChange("sample_type",t)},value:this.state.colonizationSampleTypeOptions.find(function(t){return t.value===e.state.colonizationSelection.sampleType})||null}))),o.a.createElement("form",{className:"form"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"metabolite"},"Metabolite"),o.a.createElement(y.a,{id:"metabolite",className:"dropdown",components:{MenuList:E},isClearable:!0,options:this.state.metaboliteOptions,onChange:function(t){return e.handleMetaboliteSelectionChange("metabolite",t)},value:this.state.metaboliteOptions.find(function(t){return t.value===e.state.metaboliteSelection.metabolite})||null})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"sample_type"},"Sample Type"),o.a.createElement(y.a,{id:"sample_type",className:"dropdown",isClearable:!0,isDisabled:null===this.state.metaboliteSelection.metabolite,options:this.state.metaboliteSampleTypeOptions,onChange:function(t){return e.handleMetaboliteSelectionChange("sample_type",t)},value:this.state.metaboliteSampleTypeOptions.find(function(t){return t.value===e.state.metaboliteSelection.sampleType})||null}))),a.length>0?o.a.createElement("div",{style:{width:"100%",overflowX:"scroll",overflowY:"hidden"}},o.a.createElement("div",{style:{minWidth:i+"px",width:i<500?i+"px":null,height:"1100px"}},o.a.createElement(S.a,{tooltip:function(t){var a=t.node;return o.a.createElement("div",{style:{background:"#fff",border:"1px solid #ccc",color:a.style.color,fontSize:"12px",padding:"6px 6px"}},o.a.createElement("div",{style:{maxWidth:"400px",wordWrap:"break-word"}},o.a.createElement("strong",null,e.state.metaboliteSelection.metabolite?"colonization":"metabolite"),": ",a.data.name),o.a.createElement("div",null,o.a.createElement("strong",null,"y"),": ",a.data.formattedY))},data:a,colors:{scheme:"category10"},theme:{fontSize:10},pixelRatio:2,margin:{top:80,right:20,bottom:740,left:90},xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:l[0],max:l[1]},nodeSize:4,gridXValues:Object.keys(n),axisBottom:{format:function(e){return n[e]},orient:"bottom",tickValues:Object.keys(n),tickSize:5,tickPadding:5,tickRotation:-90,legend:this.state.metaboliteSelection.metabolite?"Colonization":"Metabolite",legendPosition:"middle",legendOffset:this.state.metaboliteSelection.metabolite?130:700},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Relative fold change versus germ-free controls (log2)",legendPosition:"middle",legendOffset:-60}}))):null,0==a.length?o.a.createElement("footer",null,o.a.createElement("p",null,"About the Website: The Metabolomics Data Explorer was designed by Shuo Han. \xa9 The Sonnenburg Lab 2020, Stanford University")):null)}}]),t}(o.a.Component),L=function(e){return o.a.createElement(r.a,null,o.a.createElement("nav",null,o.a.createElement("span",{className:"home"},"Metabolomics Data Explorer"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(r.b,{to:"/",exact:!0,activeClassName:"active"},"In vitro")),o.a.createElement("li",null,o.a.createElement(r.b,{to:"/invivo",exact:!0,activeClassName:"active"},"In vivo")))),o.a.createElement(s.a,{path:"/",exact:!0,component:D}),o.a.createElement(s.a,{path:"/invivo",exact:!0,component:B}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[196,1,2]]]);
//# sourceMappingURL=main.7d8e3cd6.chunk.js.map